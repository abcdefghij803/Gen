<!doctype html>
<html>
<head><meta charset="utf-8"><title>KeyBot - Generate</title></head>
<body style="font-family:Arial;background:#0b1220;color:#e6eef8;padding:30px">
<h2>KeyBot — Generate API Key</h2>
<p>Enter your Telegram user id to generate a fresh API key (no secrets needed).</p>
<form id="genForm">
  <label>User ID</label><br><input id="user_id" required/><br><br>
  <label>Plan (free/premium/pro)</label><br><input id="plan"/><br><br>
  <button type="submit">Generate</button>
</form>
<div id="res" style="margin-top:16px;display:none">
  <h3>✅ API Key</h3><pre id="keybox"></pre>
  <a id="dash" href="#">Open Dashboard</a>
</div>
<script>
document.getElementById('genForm').addEventListener('submit', async e => {
  e.preventDefault();
  const uid = document.getElementById('user_id').value.trim();
  const plan = document.getElementById('plan').value.trim() || 'free';
  if(!uid) return alert('enter user id');
  const res = await fetch('/api/generate', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({user_id:uid,plan})});
  const j = await res.json();
  if(res.ok){
    document.getElementById('keybox').innerText = j.api_key;
    document.getElementById('dash').href = `/dashboard?user_id=${encodeURIComponent(uid)}`;
    document.getElementById('res').style.display = 'block';
  } else {
    alert(JSON.stringify(j));
  }
});
</script>
<p style="margin-top:18px">Need help? <a style="color:#7dd3fc" href="{{ support_url }}">Support</a></p>
</body></html>
  
